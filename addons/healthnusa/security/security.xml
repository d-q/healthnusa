<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <!-- HealthNusa Application Category -->
        <record id="module_category_healthnusa" model="ir.module.category">
            <field name="name">HealthNusa</field>
            <field name="description">Healthcare Management System</field>
            <field name="sequence">20</field>
        </record>

        <!-- User Groups -->
        <record id="group_healthnusa_user" model="res.groups">
            <field name="name">HealthNusa User</field>
            <field name="category_id" ref="module_category_healthnusa"/>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="comment">Basic access to HealthNusa features</field>
        </record>

        <record id="group_healthnusa_doctor" model="res.groups">
            <field name="name">HealthNusa Doctor</field>
            <field name="category_id" ref="module_category_healthnusa"/>
            <field name="implied_ids" eval="[(4, ref('group_healthnusa_user'))]"/>
            <field name="comment">Doctor access with patient management</field>
        </record>

        <record id="group_healthnusa_admin" model="res.groups">
            <field name="name">HealthNusa Administrator</field>
            <field name="category_id" ref="module_category_healthnusa"/>
            <field name="implied_ids" eval="[(4, ref('group_healthnusa_doctor'))]"/>
            <field name="comment">Full administrative access to HealthNusa</field>
        </record>

        <record id="group_healthnusa_manager" model="res.groups">
            <field name="name">HealthNusa Manager</field>
            <field name="category_id" ref="module_category_healthnusa"/>
            <field name="implied_ids" eval="[(4, ref('group_healthnusa_admin'))]"/>
            <field name="comment">Management access with system configuration</field>
        </record>

        <!-- Record Rules -->

        <!-- Doctors can only see their own records -->
        <record id="rule_doctor_own_records" model="ir.rule">
            <field name="name">Doctor: Own Records Only</field>
            <field name="model_id" ref="model_hr_employee"/>
            <field name="domain_force">[('id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_healthnusa_doctor'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <!-- Admins can see all doctor records -->
        <record id="rule_admin_all_doctors" model="ir.rule">
            <field name="name">Admin: All Doctor Records</field>
            <field name="model_id" ref="model_hr_employee"/>
            <!-- <field name="domain_force">[('is_doctor', '=', True)]</field> -->
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_healthnusa_admin'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>

        <!-- Doctor Schedule Rules -->
        <record id="rule_doctor_schedule_own" model="ir.rule">
            <field name="name">Doctor: Own Schedule Only</field>
            <field name="model_id" ref="model_healthnusa_doctor_schedule"/>
            <field name="domain_force">[('doctor_id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_healthnusa_doctor'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>

        <record id="rule_admin_all_schedules" model="ir.rule">
            <field name="name">Admin: All Schedules</field>
            <field name="model_id" ref="model_healthnusa_doctor_schedule"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_healthnusa_admin'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>

        <!-- Doctor Education Rules -->
        <record id="rule_doctor_education_own" model="ir.rule">
            <field name="name">Doctor: Own Education Only</field>
            <field name="model_id" ref="model_healthnusa_doctor_education"/>
            <field name="domain_force">[('doctor_id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_healthnusa_doctor'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>

        <!-- Doctor Experience Rules -->
        <record id="rule_doctor_experience_own" model="ir.rule">
            <field name="name">Doctor: Own Experience Only</field>
            <field name="model_id" ref="model_healthnusa_doctor_experience"/>
            <field name="domain_force">[('doctor_id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_healthnusa_doctor'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>

        <!-- Doctor Document Rules -->
        <record id="rule_doctor_document_own" model="ir.rule">
            <field name="name">Doctor: Own Documents Only</field>
            <field name="model_id" ref="model_healthnusa_doctor_document"/>
            <field name="domain_force">[('doctor_id', '=', user.partner_id.id)]</field>
            <field name="groups" eval="[(4, ref('group_healthnusa_doctor'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>

    </data>
</odoo>