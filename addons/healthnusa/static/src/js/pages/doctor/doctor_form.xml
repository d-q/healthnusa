<templates xml:space="preserve">
    <t t-name="healthnusa.DoctorNew">
        <div class="flex gap-8">
            <div class="w-1/3">
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md flex flex-col items-center transition-colors duration-300">
                    <div class="relative mb-4">
                        <!-- Show image if exists, otherwise show person icon -->
                        <div t-if="state.doctor.image" class="w-36 h-36 rounded-full overflow-hidden">
                            <img alt="Doctor profile picture" class="w-full h-full object-cover" t-att-src="state.doctor.image" />
                        </div>
                        <div t-else="" class="w-36 h-36 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center">
                            <span class="material-icons text-gray-400 dark:text-gray-300" style="font-size: 4rem;">person</span>
                        </div>
                        <button class="absolute bottom-0 right-0 bg-blue-500 p-2 rounded-full text-white hover:bg-blue-600 transition-colors duration-200" t-on-click="selectImage">
                            <span class="material-icons text-base">edit</span>
                        </button>
                    </div>
                    <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100" t-esc="state.doctor.name"></h2>
                    <p class="text-blue-500 mb-6" t-esc="state.doctor.specialty"></p>
                    <div class="w-full space-y-4 text-sm">
                        <div class="flex items-center">
                            <span class="material-icons text-gray-500 dark:text-gray-400 mr-3">verified_user</span>
                            <div class="w-full">
                                <label class="block text-gray-600 dark:text-gray-300 mb-1">Medical License Number</label>
                                <input class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="text" t-att-value="state.doctor.medicalLicense"/>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <span class="material-icons text-gray-500 dark:text-gray-400 mr-3">workspace_premium</span>
                            <div class="w-full">
                                <label class="block text-gray-600 dark:text-gray-300 mb-1">Practice License Number</label>
                                <input class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="text" t-att-value="state.doctor.practiceLicense"/>
                            </div>
                        </div>

                        <!-- Schedule Section with Working Add Time - Complete Version -->
                        <div class="flex items-start">
                            <span class="material-icons text-gray-500 dark:text-gray-400 mr-3 mt-2">schedule</span>
                            <div class="w-full">
                                <p class="text-gray-600 dark:text-gray-300 mb-2">Schedule &amp; Practice Hours</p>
                                <div class="space-y-4">
                                    <t t-foreach="state.doctor.schedule" t-as="scheduleDay" t-key="scheduleDay.day">
                                        <div class="flex items-start space-x-2">
                                            <label t-att-class="'flex items-center space-x-2 p-2 border border-gray-300 dark:border-gray-600 rounded-md cursor-pointer w-20 justify-center ' + (scheduleDay.active ? scheduleDay.bgClass + ' ' + scheduleDay.textClass : 'bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400')">
                                                <input t-att-checked="scheduleDay.active" t-att-class="'form-checkbox h-4 w-4 ' + scheduleDay.checkboxClass" type="checkbox" />
                                                <span t-esc="scheduleDay.label"></span>
                                            </label>
                                            <div t-att-class="'flex-1 space-y-2' + (scheduleDay.active ? '' : ' opacity-50')">
                                                <t t-foreach="scheduleDay.times" t-as="timeSlot" t-key="timeSlot_index">
                                                    <div class="flex items-center space-x-2">
                                                        <input t-att-value="timeSlot.start" t-att-disabled="!scheduleDay.active" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="time" />
                                                        <span class="text-gray-500">-</span>
                                                        <input t-att-value="timeSlot.end" t-att-disabled="!scheduleDay.active" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="time" />
                                                        <button t-att-disabled="!scheduleDay.active" class="text-gray-400 hover:text-red-500 p-1 rounded transition-colors duration-200" t-on-click="removeTimeSlot">
                                                            <span class="material-icons text-base">delete</span>
                                                        </button>
                                                    </div>
                                                </t>
                                                <button t-att-disabled="!scheduleDay.active" class="text-blue-500 text-xs font-semibold hover:text-blue-700 transition-colors duration-200" t-on-click="addTimeSlot">+ Add time</button>
                                            </div>
                                        </div>
                                    </t>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <span class="material-icons text-gray-500 dark:text-gray-400 mr-3">work_outline</span>
                            <div class="w-full">
                                <label class="block text-gray-600 dark:text-gray-300 mb-1">Duty Status</label>
                                <select t-att-value="state.doctor.dutyStatus" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100">
                                    <t t-foreach="state.doctor.dutyStatusOptions" t-as="option" t-key="option.value">
                                        <option t-att-value="option.value" t-att-selected="option.value === state.doctor.dutyStatus" t-esc="option.label"></option>
                                    </t>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="w-full mt-8">
                        <p class="text-gray-600 dark:text-gray-300 font-semibold mb-2">Actions</p>
                        <button t-on-click="saveDoctorData" class="w-full bg-blue-500 text-white py-3 rounded-lg font-semibold hover:bg-blue-600 transition duration-300">Save Changes</button>
                        <button class="w-full bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 py-3 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-500 mt-2 transition duration-300">Cancel</button>
                    </div>
                </div>
            </div>

            <div class="w-2/3">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md transition-colors duration-300">
                    <div class="border-b border-gray-200 dark:border-gray-700">
                        <nav class="flex space-x-8 px-6">
                            <a class="py-4 text-blue-600 border-b-2 border-blue-600 font-semibold flex items-center space-x-2" href="#" t-on-click="(ev) => this.showTab(ev, 'doctor-details')">
                                <span class="material-icons text-lg">person</span>
                                <span>Doctor Details</span>
                            </a>
                            <a class="py-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 flex items-center space-x-2" href="#" t-on-click="(ev) => this.showTab(ev, 'medical-license')">
                                <span class="material-icons text-lg">verified_user</span>
                                <span>Medical License</span>
                            </a>
                            <a class="py-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 flex items-center space-x-2" href="#" t-on-click="(ev) => this.showTab(ev, 'appointments')">
                                <span class="material-icons text-lg">event_note</span>
                                <span>Appointments</span>
                            </a>
                        </nav>
                    </div>

                    <div id="mainContent" class="p-6">
                        <!-- Doctor Details Tab -->
                        <div id="doctor-details" class="tab-content">
                            <h3 class="text-lg font-bold text-gray-800 dark:text-gray-100 mb-4">Personal Information</h3>
                            <div class="grid grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">Full Name</label>
                                    <input class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="text" t-att-value="state.doctor.name" />
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">Gender</label>
                                    <select class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" t-att-value="state.doctor.gender">
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">Date of Birth</label>
                                    <input class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="date" t-att-value="state.doctor.birthDate" />
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">Phone</label>
                                    <input class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="tel" t-att-value="state.doctor.phone" />
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">Email</label>
                                    <input class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="email" t-att-value="state.doctor.email" />
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">Specialization</label>
                                    <input class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="text" t-att-value="state.doctor.fullSpecialization" />
                                </div>
                                <div class="col-span-2">
                                    <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">Address</label>
                                    <textarea class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" rows="3" t-esc="state.doctor.address"></textarea>
                                </div>
                            </div>

                            <h3 class="text-lg font-bold text-gray-800 dark:text-gray-100 mt-8 mb-4">Educational Background</h3>
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                                    <thead class="text-xs text-gray-700 dark:text-gray-300 uppercase bg-gray-50 dark:bg-gray-700">
                                        <tr>
                                            <th class="px-6 py-3" scope="col">Degree</th>
                                            <th class="px-6 py-3" scope="col">Institution</th>
                                            <th class="px-6 py-3" scope="col">Year</th>
                                            <th class="px-6 py-3 text-right" scope="col">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="state.doctor.education" t-as="edu" t-key="edu.id">
                                            <tr class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">
                                                <td class="px-6 py-4 font-medium text-gray-900 dark:text-gray-100">
                                                    <input t-if="this.isEditingEducation(edu.id)" t-att-value="edu.degree" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="text" />
                                                    <span t-else="" t-esc="edu.degree"></span>
                                                </td>
                                                <td class="px-6 py-4">
                                                    <input t-if="this.isEditingEducation(edu.id)" t-att-value="edu.institution" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="text" />
                                                    <span t-else="" t-esc="edu.institution"></span>
                                                </td>
                                                <td class="px-6 py-4">
                                                    <input t-if="this.isEditingEducation(edu.id)" t-att-value="edu.period" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="text" />
                                                    <span t-else="" t-esc="edu.period"></span>
                                                </td>
                                                <td class="px-6 py-4 text-right">
                                                    <div class="flex justify-end space-x-2">
                                                        <button t-if="this.isEditingEducation(edu.id)" class="text-blue-600 hover:text-blue-800" t-on-click="(ev) => this.saveRow(ev.target)">
                                                            <span class="material-icons">save</span>
                                                        </button>
                                                        <button t-else="" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200" t-on-click="(ev) => this.editRow(ev.target)">
                                                            <span class="material-icons">edit</span>
                                                        </button>
                                                        <button t-att-class="this.isEditingEducation(edu.id) ? 'text-red-600 hover:text-red-800' : 'text-red-500 hover:text-red-700'" t-on-click="(ev) => this.deleteRow(ev.target)">
                                                            <span class="material-icons">delete</span>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>
                            </div>
                            <button class="mt-4 text-blue-500 hover:text-blue-700 font-semibold" t-on-click="addEducationRow">+ Add Education</button>

                            <h3 class="text-lg font-bold text-gray-800 dark:text-gray-100 mt-8 mb-4">Work Experience</h3>
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                                    <thead class="text-xs text-gray-700 dark:text-gray-300 uppercase bg-gray-50 dark:bg-gray-700">
                                        <tr>
                                            <th class="px-6 py-3" scope="col">Position</th>
                                            <th class="px-6 py-3" scope="col">Institution</th>
                                            <th class="px-6 py-3" scope="col">Period</th>
                                            <th class="px-6 py-3 text-right" scope="col">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="state.doctor.experience" t-as="exp" t-key="exp.id">
                                            <tr class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">
                                                <td class="px-6 py-4 font-medium text-gray-900 dark:text-gray-100">
                                                    <input t-if="this.isEditingExperience(exp.id)" t-att-value="exp.position" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="text" />
                                                    <span t-else="" t-esc="exp.position"></span>
                                                </td>
                                                <td class="px-6 py-4">
                                                    <input t-if="this.isEditingExperience(exp.id)" t-att-value="exp.institution" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="text" />
                                                    <span t-else="" t-esc="exp.institution"></span>
                                                </td>
                                                <td class="px-6 py-4">
                                                    <input t-if="this.isEditingExperience(exp.id)" t-att-value="exp.period" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="text" />
                                                    <span t-else="" t-esc="exp.period"></span>
                                                </td>
                                                <td class="px-6 py-4 text-right">
                                                    <div class="flex justify-end space-x-2">
                                                        <button t-if="this.isEditingExperience(exp.id)" class="text-blue-600 hover:text-blue-800" t-on-click="(ev) => this.saveRow(ev.target)">
                                                            <span class="material-icons">save</span>
                                                        </button>
                                                        <button t-else="" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200" t-on-click="(ev) => this.editRow(ev.target)">
                                                            <span class="material-icons">edit</span>
                                                        </button>
                                                        <button t-att-class="this.isEditingExperience(exp.id) ? 'text-red-600 hover:text-red-800' : 'text-red-500 hover:text-red-700'" t-on-click="(ev) => this.deleteRow(ev.target)">
                                                            <span class="material-icons">delete</span>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>
                            </div>
                            <button class="mt-4 text-blue-500 hover:text-blue-700 font-semibold" t-on-click="addExperienceRow">+ Add Experience</button>
                        </div>

                        <!-- Medical License Tab -->
                        <div id="medical-license" class="tab-content hidden">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-bold text-gray-800 dark:text-gray-100">Medical Licenses &amp; Certifications</h3>
                                <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors duration-200 flex items-center space-x-2" t-on-click="showAddLicenseForm">
                                    <span class="material-icons text-base">add</span>
                                    <span>Add License</span>
                                </button>
                            </div>

                            <!-- Add License Form -->
                            <div id="addLicenseForm" t-att-class="state.showAddLicenseForm ? 'mb-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg p-6' : 'hidden mb-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg p-6'">
                                <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4">Add New License/Certificate</h4>
                                <form onsubmit="addNewLicense(event)">
                                    <div class="grid grid-cols-2 gap-4 mb-4">
                                        <div>
                                            <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">License Type</label>
                                            <select class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" required="true">
                                                <option value="">Select License Type</option>
                                                <option value="STR">Surat Tanda Registrasi (STR)</option>
                                                <option value="SIP">Surat Izin Praktik (SIP)</option>
                                                <option value="Specialist">Specialist Certification</option>
                                                <option value="Other">Other</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">License Number</label>
                                            <input class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="text" required="true" placeholder="Enter license number" />
                                        </div>
                                        <div>
                                            <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">Issue Date</label>
                                            <input class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="date" required="true" />
                                        </div>
                                        <div>
                                            <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">Expiry Date</label>
                                            <input class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="date" required="true" />
                                        </div>
                                        <div>
                                            <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">Issuing Authority</label>
                                            <input class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="text" required="true" placeholder="Enter issuing authority" />
                                        </div>
                                        <div>
                                            <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">Status</label>
                                            <select class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" required="true">
                                                <option value="Active">Active</option>
                                                <option value="Expired">Expired</option>
                                                <option value="Suspended">Suspended</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">Additional Information</label>
                                        <textarea class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" rows="3" placeholder="Enter any additional information"></textarea>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button type="button" t-on-click="saveNewLicense" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors duration-200">Save License</button>
                                        <button type="button" t-on-click="hideAddLicenseForm" class="bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors duration-200">Cancel</button>
                                    </div>
                                </form>
                            </div>


                            <div class="space-y-6" id="licensesList">
                                <t t-foreach="state.doctor.licenses" t-as="license" t-key="license.id">
                                    <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                                        <!-- View Mode -->
                                        <div t-if="state.editingLicenseId !== license.id">
                                            <div class="flex items-start justify-between mb-3">
                                                <div class="flex items-center space-x-3">
                                                    <span t-if="license.type === 'STR'" class="material-icons text-green-600 dark:text-green-400">verified</span>
                                                    <span t-elif="license.type === 'SIP'" class="material-icons text-blue-600 dark:text-blue-400">workspace_premium</span>
                                                    <span t-else="" class="material-icons text-purple-600 dark:text-purple-400">school</span>
                                                    <div>
                                                        <h4 class="font-semibold text-gray-800 dark:text-gray-100" t-esc="license.title"></h4>
                                                        <p class="text-sm text-gray-600 dark:text-gray-300" t-esc="license.description"></p>
                                                    </div>
                                                </div>
                                                <div class="flex items-center space-x-2">
                                                    <span t-att-class="license.status === 'Active' ? 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200' : license.status === 'Valid' ? 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200' : 'bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200'" class="text-xs font-medium px-2 py-1 rounded-full" t-esc="license.status"></span>
                                                    <button class="text-gray-500 hover:text-blue-600" t-on-click="() => this.editLicense(license.id)">
                                                        <span class="material-icons text-base">edit</span>
                                                    </button>
                                                    <button class="text-gray-500 hover:text-red-600" t-on-click="(ev) => this.deleteLicense(ev.target)">
                                                        <span class="material-icons text-base">delete</span>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="grid grid-cols-2 gap-4 text-sm">
                                                <div>
                                                    <label class="block text-gray-500 dark:text-gray-400 mb-1" t-esc="license.type === 'Specialist' ? 'Certificate Number' : 'License Number'"></label>
                                                    <p class="text-gray-800 dark:text-gray-100 font-medium" t-esc="license.number"></p>
                                                </div>
                                                <div>
                                                    <label class="block text-gray-500 dark:text-gray-400 mb-1" t-esc="license.type === 'Specialist' ? 'Completion Date' : 'Issue Date'"></label>
                                                    <p class="text-gray-800 dark:text-gray-100 font-medium" t-esc="license.issueDate"></p>
                                                </div>
                                                <div t-if="license.expiryDate">
                                                    <label class="block text-gray-500 dark:text-gray-400 mb-1">Expiry Date</label>
                                                    <p class="text-gray-800 dark:text-gray-100 font-medium" t-esc="license.expiryDate"></p>
                                                </div>
                                                <div>
                                                    <label class="block text-gray-500 dark:text-gray-400 mb-1" t-esc="license.type === 'SIP' ? 'Practice Location' : license.type === 'Specialist' ? 'Institution' : 'Issuing Authority'"></label>
                                                    <p class="text-gray-800 dark:text-gray-100 font-medium" t-esc="license.authority"></p>
                                                </div>
                                                <div t-if="license.specialty">
                                                    <label class="block text-gray-500 dark:text-gray-400 mb-1">Specialty</label>
                                                    <p class="text-gray-800 dark:text-gray-100 font-medium" t-esc="license.specialty"></p>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Edit Mode -->
                                        <div t-if="state.editingLicenseId === license.id">
                                            <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4">Edit License/Certificate</h4>
                                            <div class="grid grid-cols-2 gap-4 mb-4">
                                                <div>
                                                    <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">License Type</label>
                                                    <select t-att-id="'editLicenseType-' + license.id" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" required="true">
                                                        <option value="">Select License Type</option>
                                                        <option value="STR">Surat Tanda Registrasi (STR)</option>
                                                        <option value="SIP">Surat Izin Praktik (SIP)</option>
                                                        <option value="Specialist">Specialist Certification</option>
                                                        <option value="Other">Other</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">License Number</label>
                                                    <input t-att-id="'editLicenseNumber-' + license.id" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="text" required="true" placeholder="Enter license number" />
                                                </div>
                                                <div>
                                                    <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">Issue Date</label>
                                                    <input t-att-id="'editIssueDate-' + license.id" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="date" required="true" />
                                                </div>
                                                <div>
                                                    <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">Expiry Date</label>
                                                    <input t-att-id="'editExpiryDate-' + license.id" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="date" required="true" />
                                                </div>
                                                <div>
                                                    <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">Issuing Authority</label>
                                                    <input t-att-id="'editIssuingAuthority-' + license.id" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" type="text" required="true" placeholder="Enter issuing authority" />
                                                </div>
                                                <div>
                                                    <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">Status</label>
                                                    <select t-att-id="'editStatus-' + license.id" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" required="true">
                                                        <option value="Active">Active</option>
                                                        <option value="Expired">Expired</option>
                                                        <option value="Suspended">Suspended</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="mb-4">
                                                <label class="block text-sm text-gray-500 dark:text-gray-400 mb-1">Additional Information</label>
                                                <textarea t-att-id="'editAdditionalInfo-' + license.id" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100" rows="3" placeholder="Enter any additional information"></textarea>
                                            </div>
                                            <div class="flex space-x-2">
                                                <button type="button" t-on-click="(ev) => this.updateLicense(license.id)" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors duration-200">Update License</button>
                                                <button type="button" t-on-click="cancelEditLicense" class="bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors duration-200">Cancel</button>
                                            </div>
                                        </div>
                                    </div>
                                </t>
                            </div>
                        </div>

                        <!-- Appointments Tab -->
                        <div id="appointments" class="tab-content hidden">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-lg font-bold text-gray-800 dark:text-gray-100">Upcoming Appointments</h3>
                                <div class="flex items-center space-x-2">
                                    <span class="text-sm text-gray-600 dark:text-gray-300">Today: January 15, 2025</span>
                                    <span class="bg-blue-500 text-white text-xs font-medium px-2 py-1 rounded-full" t-esc="state.doctor.appointments.length + ' appointments'"></span>
                                </div>
                            </div>

                            <div class="space-y-4">
                                <t t-foreach="state.doctor.appointments" t-as="appointment" t-key="appointment.id">
                                    <div class="border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:shadow-md transition-shadow">
                                        <div class="flex items-center justify-between">
                                            <div class="flex items-center space-x-4">
                                                <div class="w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-full flex items-center justify-center">
                                                    <span class="material-icons text-gray-600 dark:text-gray-300">person</span>
                                                </div>
                                                <div>
                                                    <h4 class="font-semibold text-gray-800 dark:text-gray-100" t-esc="appointment.patientName"></h4>
                                                    <p class="text-sm text-gray-600 dark:text-gray-300" t-esc="'ID: ' + appointment.patientId"></p>
                                                    <p class="text-sm text-gray-500 dark:text-gray-400" t-esc="appointment.reason"></p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <div class="flex items-center space-x-2 mb-1">
                                                    <span class="material-icons text-sm text-gray-500">schedule</span>
                                                    <span class="text-sm font-medium text-gray-800 dark:text-gray-100" t-esc="appointment.time"></span>
                                                </div>
                                                <span t-att-class="appointment.status === 'Confirmed' || appointment.status === 'Confirmed' ? 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200' : appointment.status === 'Waiting' ? 'bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200' : appointment.status === 'In Progress' ? 'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200' : 'bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200'" class="text-xs font-medium px-2 py-1 rounded-full" t-esc="appointment.status"></span>
                                            </div>
                                        </div>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>
</templates>